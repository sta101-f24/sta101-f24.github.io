{
  "hash": "032f21d5fe56804f1d9c9533f2083a59",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 2\"\n---\n\n\nThe goal of this lab is to effectively visualize numerical and categorical data.\n\nFor all visualizations you create, be sure to include informative titles for the plot, axes, and legend!\n\n# Getting started\n\n1.  Use [these steps](https://sta101-f24.github.io/computing/computing-access.html) to navigate to `RStudio` using the [Duke Container Manager](https://cmgr.oit.duke.edu/containers);\n\n2.  Use [these steps](https://sta101-f24.github.io/computing/computing-moving.html) to download the blank template `lab-2.qmd` and the data set `courage.csv` from our [Canvas page](https://canvas.duke.edu/courses/36641), upload them to your `RStudio` files, and move them into an appropriately named folder (`lab-2`, for instance);\n\n3.  Once `lab-2.qmd` is where it needs to be, open it, and verify that you can click the \"Render\" button in `RStudio` and get a PDF file. See [this answer](https://edstem.org/us/courses/64268/discussion/5216372?answer=12080244) on Ed if you want more guidance here;\n\n4.  Now proceed to complete the exercises in this lab.\n\n# Packages\n\nIn this lab we will work with the tidyverse packages, which is a collection of packages for doing data analysis in a \"tidy\" way.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) \n```\n:::\n\n\n# Part 1: NC Courage\n\nToday, we will be working with data from the first three full seasons of the NC Courage, a highly successful National Women's Soccer League (NWSL) team located near Duke in Cary, NC. The Courage moved to the Triangle from Western New York in 2017 and had three epic seasons in NC, culminating in winning the championship game that was held at their stadium in Cary in 2019! Data for this lab was sourced from the [`nwslR` package on Github](https://github.com/adror1/nwslR), and verified with the NC Courage website by Meredith Brown (Duke StatSci '21) in a previous semester.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncourage <- read_csv(\"data/courage.csv\")\n```\n:::\n\n\n::: callout-note\nRecalling the information [here](https://sta101-f24.github.io/computing/computing-file-paths.html), be prepared to adjust the file path to match how you have organized your files and folders.\n:::\n\nThe `courage` dataset has 78 rows and 10 variables. The variables in the dataset are as follows:\n\n| Variable      | Descripton                                         |\n|---------------|----------------------------------------------------|\n| `game_id`     | An unique ID for the game                          |\n| `game_date`   | Game date                                          |\n| `game_number` | Game number                                        |\n| `home_team`   | Name of the home team, abbreviated                 |\n| `away_team`   | Name of the away team, abbreviated                 |\n| `opponent`    | The team NC Courage played against                 |\n| `home_pts`    | Number of points by the home team                  |\n| `away_pts`    | Number of points by the away team                  |\n| `result`      | Result of the game for NC Courage (win, loss, tie) |\n| `season`      | Season (2017, 2018, or 2019)                       |\n\n## Exercise 1\n\n::: exercise\nCreate a bar plot of the `result`s of games for NC Courage. Additionally, calculate the numbers of wins, losses, and ties. Write a one sentence narrative for your findings.\n:::\n\n**Hint:** `result` is a categorical variable, so use a bar plot for the visualization and the `count()` function for calculating the frequencies of *levels* of this variable. This [primer](https://sta101-f24.github.io/computing/computing-barplot.html) may help you get started with the plot.\n\n## Exercise 2\n\n::: exercise\nCreate a new variable indicating whether the game was played at home or away for NC Courage. This variable should be called `home_courage` and take the value \"home\" if NC Courage is the home team and \"away\" if NC Courage is the away team. (Instructions for how to do this are given below.)\n\nThen, calculate the number of home and away games, and write a one sentence narrative for your findings.\n:::\n\nUse the example code below to get started.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncourage <- courage |>\n  mutate(home_courage = if_else(home_team == \"NC\", \"home\", \"away\"))\n```\n:::\n\n\nThere are two things of note here:\n\n-   The use of the assignment operator (`<-`) to assign the resulting data frame to `courage`, thus overwriting the `courage` dataset to contain this new column. We do this because we will use this new variable, `home_courage`, in a subsequent exercise.\n\n-   The use of a new function, `if_else()` to determine whether the game is played at home or away.\n\n    -   `home_team == \"NC\"` finds all rows where the home team is NC Courage.\n    -   If the home team is NC Courage, then we set the value of `home_courage` to \\`\"home\".\n    -   Otherwise (else) Courage must be the away team and we set the value of `home_courage` to `\"away\"`.\n\n## Exercise 3\n\n::: exercise\na.  This code creates a visualization that displays the relationship between `home_courage` and `result`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(courage, aes(x = home_courage, fill = result)) +\n  geom_bar(position = \"fill\")\n```\n\n::: {.cell-output-display}\n![](lab-2_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nExplain what each piece of the code is doing. Why does it produce the plot that it produces?\n\n**Hint**: to understand what the different ingredients do, try removing or altering some of them, and see how it changes the plot.\n:::\n\n::: exercise\nb.  Calculate the proportions of home and away games that the Courage won. Based on these, do your findings suggest a home-field advantage? Why or why not?\n:::\n\nSo far we have focused on whether the game was at home or away and whether the Courage won. Next, we dive deeper and focus on the number of points the Courage wins by, at home and away.\n\n## Exercise 4\n\n::: exercise\nHow many points do the Courage typically win by (on average)? Use the example code below to get started. You'll encounter a new function: `abs()` is the absolute value function. It takes the absolute value of a number. Why do we want to use this absolute value function here?\n:::\n\n**Hint:** We are only interested in games the Courage wins, therefore we should `filter()` for those games first.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncourage |>\n  filter(___) |>\n  mutate(win_pts = abs(home_pts - away_pts)) |>\n  summarize(___)\n```\n:::\n\n\n## Exercise 5\n\n::: exercise\nHow many points do NC Courage score when they win (on average)? Note this is **different than how many points** they \"win by\". How many points do the Courage score when they lose on average?\n:::\n\nTo calculate this we first need to determine how many points NC Courage scored in every game. We can use `if_else()` logic again to find this value for each game, and store it in a new column, `courage_pts`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncourage <- courage |>\n  mutate(courage_pts = if_else(home_team == \"NC\", home_pts, away_pts))\n\ncourage |>\n  group_by(___) |>\n  summarize(___)\n```\n:::\n\n\n## Exercise 6\n\n::: exercise\nNext we'll investigate visually whether or not NC Courage has a home-field advantage. Mutate the `courage` data frame to create two new variables:\n\n-   `total_pts`: Sum of points scored by both teams, i.e. `home_pts + away_pts`.\n\n-   `opponent_pts`: Points scored by the opposing team, i.e., `total_pts - courage_pts`.\n\nSave the resulting data frame as `courage` again and print the three points columns (`total_pts`, `opponent_pts`, `courage_pts`) to screen.\n:::\n\n**Hint:**\n\n-   Use the `mutate()` function to create the columns.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncourage <- courage |>\n  mutate(\n    total_pts = ___,\n    opponent_pts = ___\n    )\n```\n:::\n\n\n-   Use the `select()` function to print them to screen:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncourage |>\n  select(total_pts, opponent_pts, courage_pts)\n```\n:::\n\n\n## Exercise 7\n\n::: exercise\nCreate a scatter plot:\n\n-   `opponent_pts` (y) vs. `courage_pts` (x)\n\n-   Color the scatter plot by whether NC Courage are home or away.\n\n-   Represent the data with \"jittered\" points wth `geom_jitter()`.\n\n-   Overlay a $y = x$ line with `geom_abline()`.\n\n-   Faceted by season.\n\nWhat does the line represent? What does it mean for a point to fall above the line? Below the line?\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(courage, aes(x = ___, y = ___, color = ___)) + \n  geom_jitter(width = 0.1, height = 0.1) + \n  geom_abline(slope = 1, intercept = 0) +\n  facet_wrap(~ ___) +\n  labs(\n    x = \"___\", \n    y = \"___\", \n    title = \"___\", \n    color = \"___\"\n  )\n```\n:::\n\n\n## Exercise 8\n\n::: exercise\nIf we want to formally test whether the Courage have a home-field advantage, then we must first define what this means! In your own words, what do you think a home-field advantage means? Then, now that you've defined what it means to have a home field advantage, define what it means to **not** have a home-field advantage.\n:::\n\n::: callout-note\nWhile there is a right answer, this part is graded for completion, so don't worry too much about answering this in *exactly* the right way. Although graded for completion, your response must make sense to receive full points.\n:::\n\n# Part 2: IMS Exercises\n\nThe exercises in this section do not require code. Make sure to answer the questions in full sentences.\n\n## Exercise 9\n\n::: exercise\nIMS - [Chapter 2 exercises](https://openintro-ims.netlify.app/data-design#sec-chp2-exercises), #20: Vitamin supplements.\n:::\n\n## Exercise 10\n\n::: exercise\nIMS - [Chapter 2 exercises](https://openintro-ims.netlify.app/data-design#sec-chp2-exercises), #30: Screens, teens, and psychological well-being.\n:::\n\n## Lastly...\n\nRecommend some music for us to listen to while we grade this.\n\n# Wrap up\n\n## Submitting\n\n::: callout-important\nBefore you proceed, first, make sure that you have updated the document YAML with your name! Then, render your document one last time, for good measure.\n:::\n\nTo submit your assignment to Gradescope:\n\n-   Go to your Files pane and check the box next to the PDF output of your document (`lab-2.pdf`).\n\n-   Then, in the Files pane, go to More \\> Export. This will download the PDF file to your computer. Save it somewhere you can easily locate, e.g., your Downloads folder or your Desktop.\n\n-   Go to the course Canvas page and click on Gradescope and then click on the assignment. You'll be prompted to submit it.\n\n-   Mark the pages associated with each exercise. All of the papers of your lab should be associated with at least one question (i.e., should be \"checked\").\n\n::: callout-warning\nIf you fail to mark the pages associated with an exercise, that exercise won't be graded. This means, if you fail to mark the pages for all exercises, you will receive a 0 on the assignment. The TAs can't mark your pages for you, and for them to be able to grade, you must mark them.\n:::\n\n## Grading\n\n| Exercise    | Points |\n|-------------|--------|\n| Exercise 1  | 5      |\n| Exercise 2  | 5      |\n| Exercise 3  | 6      |\n| Exercise 4  | 6      |\n| Exercise 5  | 6      |\n| Exercise 6  | 4      |\n| Exercise 7  | 6      |\n| Exercise 8  | 2      |\n| Exercise 9  | 5      |\n| Exercise 10 | 5      |\n| **Total**   | 50     |\n\n## Acknowledgements\n\nThis assignment was adapted from a similar exercise by [Dr. Alex Fisher](https://stat.duke.edu/alexander-fisher).\n",
    "supporting": [
      "lab-2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}